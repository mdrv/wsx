---
import { css } from '../../styled-system/css'
---

<header
	id='site-header'
	class={css({
		position: 'fixed',
		top: 0,
		left: 0,
		right: 0,
		height: '4rem',
		borderBottom: '1px solid',
		borderColor: 'gray.200',
		backgroundColor: 'white',
		display: 'flex',
		alignItems: 'center',
		padding: { base: '0 1rem', md: '0 1.5rem' },
		gap: { base: '0.75rem', md: '2rem' },
		zIndex: 50,
		transition: 'background-color 0.3s, border-color 0.3s',
	})}
>
	<!-- Mobile menu button -->
	<button
		id='mobile-menu-button'
		class={css({
			display: { base: 'flex', md: 'none' },
			alignItems: 'center',
			justifyContent: 'center',
			width: '2.5rem',
			height: '2.5rem',
			color: 'gray.600',
			cursor: 'pointer',
			border: 'none',
			background: 'transparent',
			padding: 0,
			_hover: {
				color: 'gray.900',
			},
		})}
		aria-label='Toggle menu'
	>
		<svg
			width='24'
			height='24'
			viewBox='0 0 24 24'
			fill='none'
			stroke='currentColor'
			stroke-width='2'
			stroke-linecap='round'
			stroke-linejoin='round'
		>
			<line x1='3' y1='12' x2='21' y2='12'></line>
			<line x1='3' y1='6' x2='21' y2='6'></line>
			<line x1='3' y1='18' x2='21' y2='18'></line>
		</svg>
	</button>

	<a
		href='/wsx/'
		class={css({
			fontSize: { base: 'lg', md: 'xl' },
			fontWeight: 'bold',
			color: 'brand.600',
			whiteSpace: 'nowrap',
			_hover: {
				color: 'brand.700',
				textDecoration: 'none',
			},
		})}
	>
		@mdrv/wsx
	</a>

	<nav
		class={css({
			display: { base: 'none', sm: 'flex' },
			gap: '1.5rem',
			flex: 1,
		})}
	>
		<a
			href='/wsx/'
			class={css({
				color: 'gray.700',
				_hover: { color: 'brand.600' },
			})}
		>
			Docs
		</a>
		<a
			href='/wsx/api'
			class={css({
				color: 'gray.700',
				_hover: { color: 'brand.600' },
			})}
		>
			API
		</a>
		<a
			href='/wsx/examples'
			class={css({
				color: 'gray.700',
				_hover: { color: 'brand.600' },
			})}
		>
			Examples
		</a>
	</nav>

	<div
		class={css({
			display: 'flex',
			gap: '0.75rem',
			alignItems: 'center',
			marginLeft: 'auto',
		})}
	>
		<!-- Dark mode toggle -->
		<button
			id='theme-toggle'
			class={css({
				width: '2.5rem',
				height: '2.5rem',
				display: 'flex',
				alignItems: 'center',
				justifyContent: 'center',
				color: 'gray.600',
				cursor: 'pointer',
				border: 'none',
				background: 'transparent',
				padding: 0,
				borderRadius: 'md',
				_hover: {
					color: 'gray.900',
					backgroundColor: 'gray.100',
				},
			})}
			aria-label='Toggle dark mode'
		>
			<svg
				id='theme-toggle-dark-icon'
				class='hidden'
				width='20'
				height='20'
				viewBox='0 0 24 24'
				fill='none'
				stroke='currentColor'
				stroke-width='2'
				stroke-linecap='round'
				stroke-linejoin='round'
			>
				<path d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'></path>
			</svg>
			<svg
				id='theme-toggle-light-icon'
				class='hidden'
				width='20'
				height='20'
				viewBox='0 0 24 24'
				fill='none'
				stroke='currentColor'
				stroke-width='2'
				stroke-linecap='round'
				stroke-linejoin='round'
			>
				<circle cx='12' cy='12' r='5'></circle>
				<line x1='12' y1='1' x2='12' y2='3'></line>
				<line x1='12' y1='21' x2='12' y2='23'></line>
				<line x1='4.22' y1='4.22' x2='5.64' y2='5.64'></line>
				<line x1='18.36' y1='18.36' x2='19.78' y2='19.78'></line>
				<line x1='1' y1='12' x2='3' y2='12'></line>
				<line x1='21' y1='12' x2='23' y2='12'></line>
				<line x1='4.22' y1='19.78' x2='5.64' y2='18.36'></line>
				<line x1='18.36' y1='5.64' x2='19.78' y2='4.22'></line>
			</svg>
		</button>

		<a
			href='https://github.com/mdrv/wsx'
			target='_blank'
			rel='noopener noreferrer'
			class={css({
				color: 'gray.600',
				display: { base: 'none', sm: 'block' },
				_hover: { color: 'gray.900' },
			})}
		>
			GitHub
		</a>
		<a
			href='https://www.npmjs.com/package/@mdrv/wsx'
			target='_blank'
			rel='noopener noreferrer'
			class={css({
				padding: { base: '0.375rem 0.75rem', sm: '0.5rem 1rem' },
				backgroundColor: 'brand.600',
				color: 'white',
				borderRadius: 'md',
				fontSize: 'sm',
				fontWeight: 'medium',
				_hover: {
					backgroundColor: 'brand.700',
					textDecoration: 'none',
				},
			})}
		>
			v1.2.0
		</a>
	</div>
</header>

<script is:inline>
// Dark mode toggle
const themeToggle = document.getElementById('theme-toggle')
const darkIcon = document.getElementById('theme-toggle-dark-icon')
const lightIcon = document.getElementById('theme-toggle-light-icon')
const html = document.documentElement

// Check for saved theme preference or default to light mode
const currentTheme = localStorage.getItem('theme') || 'light'

function setTheme(theme) {
	if (theme === 'dark') {
		html.classList.add('dark')
		darkIcon.classList.add('hidden')
		lightIcon.classList.remove('hidden')
	} else {
		html.classList.remove('dark')
		darkIcon.classList.remove('hidden')
		lightIcon.classList.add('hidden')
	}
	localStorage.setItem('theme', theme)
}

// Set initial theme
setTheme(currentTheme)

// Toggle theme on button click
themeToggle.addEventListener('click', () => {
	const newTheme = html.classList.contains('dark') ? 'light' : 'dark'
	setTheme(newTheme)
})
</script>
